<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link rel="apple-touch-icon" sizes="180x180" href="favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicons/favicon-16x16.png">
    <link rel="manifest" href="favicons/site.webmanifest">
    <link rel="mask-icon" href="favicons/safari-pinned-tab.svg" color="#4ca061">
    <meta name="msapplication-TileColor" content="#4ca061">
    <meta name="theme-color" content="#f6f6f6">

    <title>Rates</title>

    <link rel="stylesheet" href="css/index.css">
    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
</head>
<body>
    <div class="container">
      <div id="app">
        <div class="rate rate-buy">
            <span class="rate__value">{{ buyPrice | split }}</span>

            <a class="rate__link" href="https://ennlo.com/offers/direct/92" target="_blank">Buy</a>
        </div>

        <div class="price">
            <h1 class="price__heading heading">Prices</h1>

            <div class="price__item">
                <span class="price__value">{{ buyPrice | markup(1) | split }}</span>

                <span class="price__markup">+0%</span>

                <a class="price__link" href="https://localbitcoins.net/ads#ads" target="_blank">Ads</a>
            </div>

            <div class="price__item">
                <span class="price__value">{{ buyPrice | markup(1.3) | split }}</span>

                <span class="price__markup">+0.3%</span>
            </div>

            <div class="price__item">
                <span class="price__value">{{ buyPrice | markup(1.5) | split }}</span>

                <span class="price__markup">+0.5%</span>
            </div>

            <div class="price__item">
                <span class="price__value">{{ buyPrice | markup(1.7) | split }}</span>

                <span class="price__markup">+0.7%</span>
            </div>

            <div class="price__item">
                <span class="price__value">{{ buyPrice | markup(2) | split }}</span>

                <span class="price__markup">+1%</span>
            </div>

            <div class="price__item">
                <span class="price__value">{{ buyPrice | markup(2.2) | split }}</span>

                <span class="price__markup">+1.2%</span>
            </div>

            <div class="price__item">
                <span class="price__value">{{ buyPrice | markup(2.5) | split }}</span>

                <span class="price__markup">+1.5%</span>
            </div>

            <div class="price__item">
                <span class="price__value">{{ buyPrice | markup(2.7) | split }}</span>

                <span class="price__markup">+1.7%</span>
            </div>

            <div class="price__item">
                <span class="price__value">{{ buyPrice | markup(3) | split }}</span>

                <span class="price__markup">+2%</span>
            </div>
        </div>

        <div class="lists">
            <h1 class="lists__heading heading">Lists</h1>

            <div class="lists__item">
                <span class="lists__value">All</span>

                <a class="lists__link" href="https://localbitcoins.net/ru/buy-bitcoins-online/rub/" target="_blank">Follow</a>
            </div>

            <div class="lists__item">
                <span class="lists__value">Sberbank</span>

                <a class="lists__link" href="https://localbitcoins.net/ru/buy-bitcoins-online/ru/russian-federation/banks/?q=%D1%81%D0%B1%D0%B5%D1%80" target="_blank">Follow</a>
            </div>

            <div class="lists__item">
                <span class="lists__value">VTB</span>

                <a class="lists__link" href="https://localbitcoins.net/ru/buy-bitcoins-online/ru/russian-federation/banks/?q=%D0%B2%D1%82%D0%B1" target="_blank">Follow</a>
            </div>

            <div class="lists__item">
                <span class="lists__value">Rocketbank</span>

                <a class="lists__link" href="https://localbitcoins.net/ru/buy-bitcoins-online/ru/russian-federation/banks/?q=%D0%A0%D0%BE%D0%BA%D0%B5%D1%82" target="_blank">Follow</a>
            </div>
        </div>

        <div class="platforms">
            <h1 class="platforms__heading heading">Platforms</h1>

            <div class="platforms__item">
                <span class="platforms__value">Ennlo</span>

                <a class="platforms__link" href="https://ennlo.com/wallet" target="_blank">Wallet</a>

                <a class="platforms__link" href="https://ennlo.com/wallet/BTC/withdraw" target="_blank">Withdraw</a>
            </div>

            <div class="platforms__item">
                <span class="platforms__value">Localbitcoins</span>

                <a class="platforms__link" href="https://localbitcoins.net/accounts/wallet/" target="_blank">Wallet</a>

                <a class="platforms__link" href="https://localbitcoins.net/accounts/wallet_receive/" target="_blank">Deposit</a>
            </div>

            <div class="platforms__item">
                <span class="platforms__value">Garantex</span>

                <a class="platforms__link" href="https://garantex.io/funds#/deposits/btc" target="_blank">Wallet</a>

                <a class="platforms__link" href="https://garantex.io/trading/btcrub" target="_blank">Exchange</a>

                <a class="platforms__link" href="https://garantex.io/otc" target="_blank">OTC</a>
            </div>

            <div class="platforms__item">
                <span class="platforms__value">Bgex</span>

                <a class="platforms__link" href="https://bgex.org/add" target="_blank">New</a>

                <a class="platforms__link" href="https://bgex.org/balance" target="_blank">Balance</a>
                
                <a class="platforms__link" href="https://bgex.org/hist" target="_blank">History</a>

                <a class="platforms__link" href="https://bgex.org/list" target="_blank">Requests</a>
            </div>
        </div>

        <div class="rate rate-sell">
            <span class="rate__value">{{ sellPrice | split }}</span>

            <a class="rate__link" href="https://ennlo.com/offers/direct/96" target="_blank">Sell</a>
        </div>
      </div>
    </div>

    <script>
      var app = new Vue({
        el: '#app',

        filters: {
          split(value) {
            return value.toString().replace(/\B(?=(?:\d{3})+$)/g, ' ')
          },

          markup(value, delta) {
            return Math.round(value +  (value * delta / 100));
          }
        },

        data: {
          buyPrice: '...',
          sellPrice: '...'
        },

        mounted() {
          this.getPrices();
          
          setInterval(() => {
            this.getPrices();   
          }, 10000);
        },

        methods: {
          getPrices() {
            this.fetchPrice(92).then(price => this.buyPrice = price);
            this.fetchPrice(96).then(price => this.sellPrice = price);
          },
          
          fetchPrice(id) {
            return fetch('https://ennlo.com/api/v1/offers/direct/' + id)
              .then(response => response.json())
              .then(result => {
                return Math.round(result['offer']['current_rate']['value']);
              });
          }
        }
      })
    </script>
</body>
</html>